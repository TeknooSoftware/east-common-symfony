{
    "name": "teknoo/east-website-symfony",
    "type": "metapackage",
    "description": "Metapackage to install Teknoo East Website in Symfony, Package following the #East programming philosophy, build on Teknoo/East-Foundation (and Teknoo/Recipe), and implementing a basic CMS to display dynamics pages with different types and templates.",
    "keywords": ["east","website","cms"],
    "homepage": "http://teknoo.software/website",
    "license": "MIT",
    "authors": [
        {
            "name": "Richard DÃ©loge",
            "email": "richarddeloge@gmail.com",
            "role":"Software architect, Lead developer"
        }
    ],
    "support": {
        "issues": "https://github.com/TeknooSoftware/east-website-symfony/issues",
        "source": "https://github.com/TeknooSoftware/east-website-symfony"
    },
    "funding": [
        {
            "type": "patreon",
            "url": "https://www.patreon.com/teknoo_software"
        }
    ],
    "require": {
        "ext-simplexml" : "*",
        "ext-mongodb" : "*",
        "teknoo/east-foundation-symfony": "^dev-feature-install",
        "teknoo/east-website": "^3.2.4",
        "teknoo/bridge-phpdi-symfony": "^4.0.3",
        "teknoo/composer-install": "dev-master",
        "psr/http-message":"^1.0.1",
        "psr/http-factory":"^1.0.1",
        "symfony/console": "~4.4||~5.1",
        "symfony/form": "~4.4||~5.1",
        "symfony/http-kernel": "~4.4||~5.1",
        "symfony/psr-http-message-bridge": "~2.0",
        "symfony/security-core": "~4.4||~5.1",
        "symfony/security-bundle": "~4.4||~5.1",
        "symfony/templating": "~4.4||~5.1",
        "symfony/yaml": "~4.4||~5.1",
        "twig/twig": "~2.0||~3.0",
        "laminas/laminas-diactoros": "~2.2",
        "doctrine/common": "~2.13",
        "doctrine/mongodb-odm": "~2.1",
        "doctrine/mongodb-odm-bundle": "~4.2"
    },
    "require-dev": {
        "roave/security-advisories": "dev-master"
    },
    "extra": {
        "Teknoo\\Composer\\Installer": {
            "Teknoo\\Composer\\Action\\SymfonyBundle": {
                "Teknoo\\DI\\SymfonyBridge\\DIBridgeBundle": {"all":  true},
                "Teknoo\\East\\FoundationBundle\\EastFoundationBundle": {"all": true }
            },
            "Teknoo\\Composer\\Action\\SymfonyPackages": {
                "east_website_di.yaml": [
                    "# Read the documentation:",
                    "di_bridge:",
                    "    definitions:",
                    "        - '%kernel.project_dir%/vendor/teknoo/east-website/src/di.php'",
                    "        - '%kernel.project_dir%/vendor/teknoo/east-website/infrastructures/doctrine/di.php'",
                    "        - '%kernel.project_dir%/vendor/teknoo/east-website/infrastructures/symfony/Resources/config/di.php'",
                    "        - '%kernel.project_dir%/vendor/teknoo/east-website/infrastructures/symfony/Resources/config/laminas_di.php'",
                    "        - '%kernel.project_dir%/vendor/teknoo/east-website/infrastructures/di.php'",
                    "    import:",
                    "        Doctrine\\Persistence\\ObjectManager: 'doctrine_mongodb.odm.default_document_manager'"
                ],
                "east_website_doctrine_mongodb.yaml": [
                    "doctrine_mongodb:",
                    "    document_managers:",
                    "        default:",
                    "            auto_mapping: true",
                    "            mappings:",
                    "                TeknooEastWebsite:",
                    "                    type: 'xml'",
                    "                    dir: '%kernel.project_dir%/vendor/teknoo/east-website/infrastructures/doctrine/config/universal'",
                    "                    is_bundle: false",
                    "                    prefix: 'Teknoo\\East\\Website\\Object'",
                    "                TeknooEastWebsiteDoctrine:",
                    "                    type: 'xml'",
                    "                    dir: '%kernel.project_dir%/vendor/teknoo/east-website/infrastructures/doctrine/config/doctrine'",
                    "                    is_bundle: false",
                    "                    prefix: 'Teknoo\\East\\Website\\Doctrine\\Object'"
                ],
                "east_website_security.yaml": [
                    "# To get started with security, check out the documentation:",
                    "# http://symfony.com/doc/current/security.html",
                    "security:",
                    "    encoders:",
                    "        Teknoo\\East\\WebsiteBundle\\Object\\User:",
                    "            algorithm: 'sha512'",
                    "            iterations: 100",
                    "            encode_as_base64: false",
                    "",
                    "    role_hierarchy:",
                    "        ROLE_ADMIN: 'ROLE_USER'",
                    "",
                    "    providers:",
                    "        main:",
                    "            id: 'teknoo.east.website.bundle.user_provider'",
                    "",
                    "    firewalls:",
                    "        # disables authentication for assets and the profiler, adapt it according to your needs",
                    "        dev:",
                    "            pattern: ^/(_(profiler|wdt)|css|images|js)/",
                    "            security: false",
                    "",
                    "        #Admin area, allow anonymous for login",
                    "        admin_login:",
                    "            pattern: '^/admin/login$'",
                    "            security: false",
                    "",
                    "        #require admin role for all others pages",
                    "        admin_area:",
                    "            pattern: '^/admin'",
                    "            form_login:",
                    "                check_path: 'admin_website_check'",
                    "                login_path: 'admin_website_login'",
                    "                default_target_path: 'admin_website_home'",
                    "                always_use_default_target_path: false",
                    "                use_referer: true",
                    "                csrf_token_generator: 'security.csrf.token_manager'",
                    "            remember_me:",
                    "                secret: '%env(APP_REMEMBER_SECRET)%'",
                    "                secure: true",
                    "                httponly: true",
                    "            logout:",
                    "                path: 'admin_website_logout'",
                    "                target: 'admin_website_home'",
                    "",
                    "        main:",
                    "            anonymous: ~",
                    "",
                    "    access_control:",
                    "        #Admin : require role admin",
                    "        - { path: '^/admin/', roles: ROLE_ADMIN, requires_channel: https }",
                    "        #Front : available for anyone",
                    "        - { path: '^/', roles: [ROLE_USER,IS_AUTHENTICATED_ANONYMOUSLY], requires_channel: https }"
                ]
            },
            "Teknoo\\Composer\\Action\\SymfonyRoutes": {
                "website.yaml": [
                    "admin_website_home:",
                    "    path: '/admin'",
                    "    defaults: { _controller: 'teknoo.east.website.endpoint.static', 'template': '@TeknooEastWebsite/Admin/index.html.twig' }",
                    "",
                    "admin_website_logout:",
                    "    path: '/admin/logout'",
                    "    defaults: { _controller: 'teknoo.east.website.endpoint.static', 'template': '@TeknooEastWebsite/Admin/login.html.twig' }",
                    "",
                    "admin_website_login:",
                    "    path: '/admin/login'",
                    "    defaults: { _controller: 'teknoo.east.website.endpoint.static', 'template': '@TeknooEastWebsite/Admin/login.html.twig' }",
                    "",
                    "admin_website_check:",
                    "    path: '/admin/check'",
                    "    defaults: { _controller: 'teknoo.east.website.endpoint.static', 'template': '@TeknooEastWebsite/Admin/index.html.twig' }",
                    "",
                    "admin_media_embedded_list:",
                    "    path: '/admin/media/embedded/list'",
                    "    methods:  ['GET']",
                    "    defaults: { _controller: 'teknoo.east.website.endpoint.admin.list.media', viewPath: '@TeknooEastWebsite/AdminMedia/popup.html.twig' }",
                    "",
                    "admin_website:",
                    "    resource: '@TeknooEastWebsiteBundle/Resources/config/admin_routing.yml'",
                    "    prefix: '/admin'",
                    "",
                    "website:",
                    "    resource: '@TeknooEastWebsiteBundle/Resources/config/routing.yml'",
                    ""
                ]
            }
        }
    }
}
